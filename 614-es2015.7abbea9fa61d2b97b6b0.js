"use strict";(self.webpackChunkrxjs_dev=self.webpackChunkrxjs_dev||[]).push([[614],{93614:function(t,e,i){i.r(e),i.d(e,{ApiListModule:function(){return q}});var s=i(54364),a=i(53882),r=i(44466),n=i(55552),c=i(57850),o=i(49005),l=i(2316),u=i(20749),h=i(44094),p=i(39349),f=i(70095),y=i(44541);let g=(()=>{class t{constructor(t,e){this.http=t,this.logger=e,this.apiBase=f.Yp+"api/",this.apiListJsonDefault="api-list.json",this.firstTime=!0,this.onDestroy=new u.x,this.sectionsSubject=new n.t(1),this._sections=this.sectionsSubject.pipe((0,h.R)(this.onDestroy))}get sections(){return this.firstTime&&(this.firstTime=!1,this.fetchSections(),this._sections.subscribe(t=>this.logger.log("ApiService got API sections"))),this._sections.pipe((0,p.b)(t=>{t.forEach(t=>{t.deprecated=!!t.items&&t.items.every(t=>"deprecated"===t.stability)})}))}ngOnDestroy(){this.onDestroy.next(null)}fetchSections(t){const e=this.apiBase+(t||this.apiListJsonDefault);this.http.get(e).pipe((0,h.R)(this.onDestroy),(0,p.b)(()=>this.logger.log(`Got API sections from ${e}`))).subscribe(t=>this.sectionsSubject.next(t),t=>{throw this.logger.error(t),t})}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(a.eN),l.LFG(y.Y))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac}),t})();var v=i(55370),d=i(50587);const m=["filter"];function S(t,e){if(1&t&&(l.TgZ(0,"h2",10),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit;l.Q6J("id",t.title),l.xp6(1),l.Oqu(t.title)}}function b(t,e){if(1&t&&(l.ynx(0),l.TgZ(1,"li",12),l.TgZ(2,"a",13),l._UZ(3,"span"),l.TgZ(4,"span"),l._uU(5),l.qZA(),l.qZA(),l.qZA(),l.BQk()),2&t){const t=e.$implicit;l.xp6(2),l.Q6J("href",t.path,l.LSH),l.xp6(1),l.Gre("symbol ",t.docType,""),l.xp6(1),l.Gre("stability ",t.stability,""),l.xp6(1),l.AsE("",t.title," ",t.stability&&"stable"!==t.stability?"("+t.stability+")":"","")}}function Z(t,e){if(1&t&&(l.TgZ(0,"ul",11),l.YNc(1,b,6,9,"ng-container",7),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.Q6J("ngForOf",t.items)}}function w(t,e){if(1&t&&(l.TgZ(0,"div"),l.YNc(1,S,2,2,"h2",8),l.YNc(2,Z,2,1,"ul",9),l.qZA()),2&t){const t=e.$implicit;l.xp6(1),l.Q6J("ngIf",t.items),l.xp6(1),l.Q6J("ngIf",null==t.items?null:t.items.length)}}class x{constructor(){this.query="",this.status="all",this.type="all"}}let T=(()=>{class t{constructor(t,e){this.apiService=t,this.locationService=e,this.showStatusMenu=!1,this.showTypeMenu=!1,this.criteriaSubject=new n.t(1),this.searchCriteria=new x,this.types=[{value:"all",title:"\u5168\u90e8"},{value:"class",title:"\u7c7b"},{value:"const",title:"\u5e38\u91cf"},{value:"enum",title:"\u679a\u4e3e"},{value:"function",title:"\u51fd\u6570"},{value:"interface",title:"\u63a5\u53e3"},{value:"type-alias",title:"\u7c7b\u578b\u522b\u540d"}],this.statuses=[{value:"all",title:"\u5168\u90e8"},{value:"deprecated",title:"\u5df2\u5f03\u7528"},{value:"security-risk",title:"\u6709\u5b89\u5168\u98ce\u9669"}]}ngOnInit(){this.filteredSections=(0,c.a)(this.apiService.sections,this.criteriaSubject).pipe((0,o.U)(t=>({sections:t[0],criteria:t[1]})),(0,o.U)(t=>t.sections.map(e=>Object.assign(Object.assign({},e),{items:this.filterSection(e,t.criteria)})))),this.initializeSearchCriteria()}setQuery(t){this.setSearchCriteria({query:(t||"").toLowerCase().trim()})}setStatus(t){this.toggleStatusMenu(),this.status=t,this.setSearchCriteria({status:t.value})}setType(t){this.toggleTypeMenu(),this.type=t,this.setSearchCriteria({type:t.value})}toggleStatusMenu(){this.showStatusMenu=!this.showStatusMenu}toggleTypeMenu(){this.showTypeMenu=!this.showTypeMenu}filterSection(t,{query:e,status:i,type:s}){const a=t.items.filter(a=>("all"===s||s===a.docType)&&("all"===i||i===a.stability||"security-risk"===i&&a.securityRisk)&&(!e||-1!==t.name.indexOf(e)||-1!==a.name.indexOf(e)));return a.length?a:"package"!==s||e&&-1===t.name.indexOf(e)?null:[]}initializeSearchCriteria(){const{query:t,status:e,type:i}=this.locationService.search(),s=(t||"").toLowerCase();this.queryEl.nativeElement.value=s,this.status=this.statuses.find(t=>t.value===e)||this.statuses[0],this.type=this.types.find(t=>t.value===i)||this.types[0],this.searchCriteria={query:s,status:this.status.value,type:this.type.value},this.criteriaSubject.next(this.searchCriteria)}setLocationSearch(){const{query:t,status:e,type:i}=this.searchCriteria;this.locationService.setSearch("API Search",{query:t||void 0,status:"all"!==e?e:void 0,type:"all"!==i?i:void 0})}setSearchCriteria(t){this.criteriaSubject.next(Object.assign(this.searchCriteria,t)),this.setLocationSearch()}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(g),l.Y36(v.a))},t.\u0275cmp=l.Xpm({type:t,selectors:[["aio-api-list"]],viewQuery:function(t,e){if(1&t&&l.Gf(m,7),2&t){let t;l.iGM(t=l.CRH())&&(e.queryEl=t.first)}},decls:10,vars:6,consts:[[1,"l-flex-wrap","api-filter"],["label","\u7c7b\u522b\uff1a",3,"options","selected","showSymbol","change"],[1,"form-search"],["placeholder","\u8fc7\u6ee4","aria-label","Filter",3,"input"],["filter",""],[1,"material-icons"],[1,"api-list-container","l-content-small","docs-content"],[4,"ngFor","ngForOf"],[3,"id",4,"ngIf"],["class","api-list",4,"ngIf"],[3,"id"],[1,"api-list"],[1,"api-item"],[3,"href"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"aio-select",1),l.NdJ("change",function(t){return e.setType(t.option)}),l.qZA(),l.TgZ(2,"div",2),l.TgZ(3,"input",3,4),l.NdJ("input",function(t){return e.setQuery(t.target.value)}),l.qZA(),l.TgZ(5,"i",5),l._uU(6,"search"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(7,"article",6),l.YNc(8,w,3,2,"div",7),l.ALo(9,"async"),l.qZA()),2&t&&(l.xp6(1),l.Q6J("options",e.types)("selected",e.type)("showSymbol",!0),l.xp6(7),l.Q6J("ngForOf",l.lcZ(9,4,e.filteredSections)))},directives:[d.H,s.sg,s.O5],pipes:[s.Ov],encapsulation:2}),t})(),q=(()=>{class t{constructor(){this.customElementComponent=T}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({providers:[g],imports:[[s.ez,r.m,a.JF]]}),t})()}}]);
//# sourceMappingURL=614-es2015.7abbea9fa61d2b97b6b0.js.map