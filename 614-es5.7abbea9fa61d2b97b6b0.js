!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function i(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}(self.webpackChunkrxjs_dev=self.webpackChunkrxjs_dev||[]).push([[614],{93614:function(e,s,n){n.r(s),n.d(s,{ApiListModule:function(){return C}});var r,a=n(54364),u=n(53882),c=n(44466),o=n(55552),l=n(57850),h=n(49005),f=n(2316),p=n(20749),y=n(44094),v=n(39349),g=n(70095),m=n(44541),d=((r=function(){function e(i,s){t(this,e),this.http=i,this.logger=s,this.apiBase=g.Yp+"api/",this.apiListJsonDefault="api-list.json",this.firstTime=!0,this.onDestroy=new p.x,this.sectionsSubject=new o.t(1),this._sections=this.sectionsSubject.pipe((0,y.R)(this.onDestroy))}return i(e,[{key:"sections",get:function(){var t=this;return this.firstTime&&(this.firstTime=!1,this.fetchSections(),this._sections.subscribe(function(e){return t.logger.log("ApiService got API sections")})),this._sections.pipe((0,v.b)(function(t){t.forEach(function(t){t.deprecated=!!t.items&&t.items.every(function(t){return"deprecated"===t.stability})})}))}},{key:"ngOnDestroy",value:function(){this.onDestroy.next(null)}},{key:"fetchSections",value:function(t){var e=this,i=this.apiBase+(t||this.apiListJsonDefault);this.http.get(i).pipe((0,y.R)(this.onDestroy),(0,v.b)(function(){return e.logger.log("Got API sections from ".concat(i))})).subscribe(function(t){return e.sectionsSubject.next(t)},function(t){throw e.logger.error(t),t})}}]),e}()).ɵfac=function(t){return new(t||r)(f.LFG(u.eN),f.LFG(m.Y))},r.ɵprov=f.Yz7({token:r,factory:r.ɵfac}),r),S=n(55370),b=n(50587),w=["filter"];function Z(t,e){if(1&t&&(f.TgZ(0,"h2",10),f._uU(1),f.qZA()),2&t){var i=f.oxw().$implicit;f.Q6J("id",i.title),f.xp6(1),f.Oqu(i.title)}}function T(t,e){if(1&t&&(f.ynx(0),f.TgZ(1,"li",12),f.TgZ(2,"a",13),f._UZ(3,"span"),f.TgZ(4,"span"),f._uU(5),f.qZA(),f.qZA(),f.qZA(),f.BQk()),2&t){var i=e.$implicit;f.xp6(2),f.Q6J("href",i.path,f.LSH),f.xp6(1),f.Gre("symbol ",i.docType,""),f.xp6(1),f.Gre("stability ",i.stability,""),f.xp6(1),f.AsE("",i.title," ",i.stability&&"stable"!==i.stability?"("+i.stability+")":"","")}}function k(t,e){if(1&t&&(f.TgZ(0,"ul",11),f.YNc(1,T,6,9,"ng-container",7),f.qZA()),2&t){var i=f.oxw().$implicit;f.xp6(1),f.Q6J("ngForOf",i.items)}}function x(t,e){if(1&t&&(f.TgZ(0,"div"),f.YNc(1,Z,2,2,"h2",8),f.YNc(2,k,2,1,"ul",9),f.qZA()),2&t){var i=e.$implicit;f.xp6(1),f.Q6J("ngIf",i.items),f.xp6(1),f.Q6J("ngIf",null==i.items?null:i.items.length)}}var q=function e(){t(this,e),this.query="",this.status="all",this.type="all"},A=function(){var e=function(){function e(i,s){t(this,e),this.apiService=i,this.locationService=s,this.showStatusMenu=!1,this.showTypeMenu=!1,this.criteriaSubject=new o.t(1),this.searchCriteria=new q,this.types=[{value:"all",title:"全部"},{value:"class",title:"類"},{value:"const",title:"常數"},{value:"enum",title:"列舉"},{value:"function",title:"函式"},{value:"interface",title:"介面"},{value:"type-alias",title:"型別別名"}],this.statuses=[{value:"all",title:"全部"},{value:"deprecated",title:"已棄用"},{value:"security-risk",title:"有安全風險"}]}return i(e,[{key:"ngOnInit",value:function(){var t=this;this.filteredSections=(0,l.a)(this.apiService.sections,this.criteriaSubject).pipe((0,h.U)(function(t){return{sections:t[0],criteria:t[1]}}),(0,h.U)(function(e){return e.sections.map(function(i){return Object.assign(Object.assign({},i),{items:t.filterSection(i,e.criteria)})})})),this.initializeSearchCriteria()}},{key:"setQuery",value:function(t){this.setSearchCriteria({query:(t||"").toLowerCase().trim()})}},{key:"setStatus",value:function(t){this.toggleStatusMenu(),this.status=t,this.setSearchCriteria({status:t.value})}},{key:"setType",value:function(t){this.toggleTypeMenu(),this.type=t,this.setSearchCriteria({type:t.value})}},{key:"toggleStatusMenu",value:function(){this.showStatusMenu=!this.showStatusMenu}},{key:"toggleTypeMenu",value:function(){this.showTypeMenu=!this.showTypeMenu}},{key:"filterSection",value:function(t,e){var i=e.query,s=e.status,n=e.type,r=t.items.filter(function(e){return("all"===n||n===e.docType)&&("all"===s||s===e.stability||"security-risk"===s&&e.securityRisk)&&(!i||-1!==t.name.indexOf(i)||-1!==e.name.indexOf(i))});return r.length?r:"package"!==n||i&&-1===t.name.indexOf(i)?null:[]}},{key:"initializeSearchCriteria",value:function(){var t=this.locationService.search(),e=t.query,i=t.status,s=t.type,n=(e||"").toLowerCase();this.queryEl.nativeElement.value=n,this.status=this.statuses.find(function(t){return t.value===i})||this.statuses[0],this.type=this.types.find(function(t){return t.value===s})||this.types[0],this.searchCriteria={query:n,status:this.status.value,type:this.type.value},this.criteriaSubject.next(this.searchCriteria)}},{key:"setLocationSearch",value:function(){var t=this.searchCriteria,e=t.query,i=t.status,s=t.type;this.locationService.setSearch("API Search",{query:e||void 0,status:"all"!==i?i:void 0,type:"all"!==s?s:void 0})}},{key:"setSearchCriteria",value:function(t){this.criteriaSubject.next(Object.assign(this.searchCriteria,t)),this.setLocationSearch()}}]),e}();return e.ɵfac=function(t){return new(t||e)(f.Y36(d),f.Y36(S.a))},e.ɵcmp=f.Xpm({type:e,selectors:[["aio-api-list"]],viewQuery:function(t,e){var i;(1&t&&f.Gf(w,7),2&t)&&(f.iGM(i=f.CRH())&&(e.queryEl=i.first))},decls:10,vars:6,consts:[[1,"l-flex-wrap","api-filter"],["label","類別：",3,"options","selected","showSymbol","change"],[1,"form-search"],["placeholder","過濾","aria-label","Filter",3,"input"],["filter",""],[1,"material-icons"],[1,"api-list-container","l-content-small","docs-content"],[4,"ngFor","ngForOf"],[3,"id",4,"ngIf"],["class","api-list",4,"ngIf"],[3,"id"],[1,"api-list"],[1,"api-item"],[3,"href"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"aio-select",1),f.NdJ("change",function(t){return e.setType(t.option)}),f.qZA(),f.TgZ(2,"div",2),f.TgZ(3,"input",3,4),f.NdJ("input",function(t){return e.setQuery(t.target.value)}),f.qZA(),f.TgZ(5,"i",5),f._uU(6,"search"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(7,"article",6),f.YNc(8,x,3,2,"div",7),f.ALo(9,"async"),f.qZA()),2&t&&(f.xp6(1),f.Q6J("options",e.types)("selected",e.type)("showSymbol",!0),f.xp6(7),f.Q6J("ngForOf",f.lcZ(9,4,e.filteredSections)))},directives:[b.H,a.sg,a.O5],pipes:[a.Ov],encapsulation:2}),e}(),C=function(){var e=function e(){t(this,e),this.customElementComponent=A};return e.ɵfac=function(t){return new(t||e)},e.ɵmod=f.oAB({type:e}),e.ɵinj=f.cJS({providers:[d],imports:[[a.ez,c.m,u.JF]]}),e}()}}])}();
//# sourceMappingURL=614-es5.7abbea9fa61d2b97b6b0.js.map
